# ProfitPilot AI Business Optimization Assistant

ProfitPilot AI is an intelligent, multi-agent business optimization assistant designed to provide small to medium-sized businesses with data-driven insights and actionable recommendations across key operational areas. Leveraging the power of large language models and integration with cloud data solutions, ProfitPilot aims to democratize access to sophisticated business analytics, helping owners make informed decisions to improve profitability, manage inventory, and understand market trends.

---

## Features and Functionality

ProfitPilot AI operates through a coordinated system of specialized AI agents, each focusing on a distinct aspect of business operations:

* **Intelligent Onboarding & Data Seeding:** The **Onboarding Agent** handles the initial setup, collecting crucial business details like name, address, business type, and contact information. It integrates with Google My Business (GMB) to retrieve existing business profiles and establishes a unique `business_id` for consistent data management. If a GMB profile isn't found or is incomplete, the agent intelligently prompts the user for necessary details. For demonstration purposes or to provide a quick start for new businesses, the system can **leverage Gemini's generative capabilities to create realistic sample sales and inventory data based on the dynamic business input**, populating BigQuery tables to showcase functionality even with limited initial data.
* **Comprehensive Data Management:** At its core, ProfitPilot utilizes **Google BigQuery** as a robust, scalable data warehouse. This allows for the storage and efficient querying of diverse business data, including:
    * Business profiles
    * Competitor information
    * Customer reviews
    * Inventory items (cost, price, stock levels, perishability)
    * Sales transactions (timestamp, quantity, revenue, profit)
* **Dynamic Business Analytics powered by Gemini:** The **Business Analyst Agent** provides in-depth insights into operational performance, with **Gemini actively processing and interpreting the retrieved data**:
    * **Sales Trend Analysis (Gemini-driven):** The agent fetches granular sales transaction data from BigQuery, which is then fed into **Gemini 1.5 Flash** for **comprehensive sales trend analysis**. Gemini identifies patterns, highlights peak sales periods, pinpoints top-performing items by quantity and revenue, and flags any unusual fluctuations or anomalies, providing a clear narrative of sales performance over time.
    * **Inventory Level Monitoring:** Reports on current stock levels, highlighting items below reorder thresholds and perishable goods nearing expiration.
    * **Pricing Advice (Gemini-driven):** By querying inventory costs and sales performance from BigQuery, the agent provides this structured data to **Gemini 1.5 Flash**. Gemini then **analyzes these pricing trends and profitability metrics**, offering actionable recommendations on potential price adjustments, strategies for optimizing high-profit and low-profit items, and overall pricing strategies.
* **Competitive Intelligence with External Data Integration (Google Maps & Gemini):** The **Comparison Agent** empowers businesses to understand their market position. It performs **external calls to the Google Maps Platform (Places API) to search for nearby competitor businesses and fetch their public review data**. This raw competitor information (including business details and aggregated review snippets) is then summarized and analyzed by **Gemini 1.5 Flash** to provide **competitive comparisons** and insights into market standing, customer sentiment, and areas for improvement relative to local rivals.
* **Contextual Understanding and Delegation:** A central **Root Agent** orchestrates the entire system. It interprets user queries, maintains conversational context (crucially, the `business_id`), and intelligently delegates tasks to the appropriate specialized sub-agent (Onboarding, Business Analyst, or Comparison). It also synthesizes responses from sub-agents into a cohesive, user-friendly narrative generated by Gemini.

---

## Technologies Used

* **Google Gemini 1.5 Flash API:** The primary Large Language Model (LLM) powering the conversational understanding, **data analysis and interpretation, actionable insight generation**, and response articulation across all agents. Gemini's capabilities enable nuanced interpretations of user requests and articulate, data-backed recommendations.
* **Google BigQuery:** A fully managed, serverless data warehouse used for storing and querying all structured business data. Its scalability and performance are critical for handling diverse datasets efficiently.
* **Google Maps Platform / Google Places API:** Utilized by the Comparison Agent to **discover nearby competitors and programmatically retrieve their Google Place IDs and public customer review data**.
* **Python:** The core programming language for developing the agent framework and integrating with Google Cloud services and APIs.
* **`google-cloud-bigquery` library:** Python client library for interacting with BigQuery.
* **`google-generativeai` library:** Python client library for interacting with the Gemini API.
* **`googlemaps` library:** Python client library for interacting with the Google Maps Platform (including Places API).
* **`python-dotenv`:** For secure management of API keys and environment variables.
* **Virtual Environments (`venv`):** For managing project dependencies and ensuring a clean development environment.

---

## Other Data Sources Used

Beyond the data collected directly during onboarding and the BigQuery-stored operational data, ProfitPilot integrates with:

* **Google My Business (GMB):** Leveraged during onboarding to pre-fill business details for registered entities.
* **Google Maps Platform (Places API):** This external API serves as a crucial, real-time source for geographic business information and public customer reviews for competitor analysis. **It allows for dynamic discovery and fetching of information about competitors based on location and business type.**

---

## Findings and Learnings

Working through the ProfitPilot project provided several key findings and valuable learnings:

* **The Power of Agentic Architectures:** Designing a multi-agent system significantly simplifies complexity compared to a monolithic LLM application. Each agent's specialized prompt and tools allow for precise control and better performance on specific tasks, making the overall system more robust and maintainable.
* **Context Management is Paramount:** Maintaining session context, especially the `business_id`, across multiple turns and agent delegations was a central challenge. The Root Agent's role in storing and passing this context is vital for a seamless user experience.
* **Robust Tooling and External API Integration:** Implementing BigQuery interactions required careful handling of query parameters and anticipating potential data retrieval errors. Integrating with external APIs like Google Maps required understanding their specific rate limits and data return formats, and ensuring that retrieved data was then correctly formatted for BigQuery storage or **Gemini analysis**.
* **LLM Integration and Structured Data Analysis:** While powerful, LLMs require well-structured prompts and reliable tool outputs. **A key learning was in effectively transforming raw BigQuery results (e.g., sales transactions, inventory records) into a clear, concise JSON format that Gemini could readily interpret for analysis.** This enabled Gemini to perform sophisticated tasks like identifying **sales trends, deriving pricing insights, and conducting competitive comparisons** based on factual, numerical data. The need to serialize `datetime` objects for JSON transfer highlighted the importance of data preparation before LLM processing.
* **Leveraging LLMs for Data Generation:** The ability to use Gemini for **generating synthetic but realistic sample data** was a powerful realization, especially for demonstrating system capabilities when real-world data might be scarce or sensitive.
* **Importance of Isolated Testing:** The iterative process of testing individual tool functions and agent components in isolation (as demonstrated by running `tools.py` directly with mock data) proved invaluable for debugging and validating functionality before integrating into the full agent flow.
* **Data Consistency and Schema Design:** The project reinforced the importance of a well-defined BigQuery schema (`business`, `inventory_item`, `sales_transaction`, etc.). A consistent schema is fundamental for reliable data storage and retrieval by the agents.